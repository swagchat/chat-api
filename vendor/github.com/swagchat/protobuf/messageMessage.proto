syntax = "proto2";

package swagchat.protobuf;
option go_package = "github.com/swagchat/protobuf";

import "gogoproto/gogo.proto";
// import "github.com/gogo/protobuf/gogoproto/gogo.proto";
// import "google/protobuf/struct.proto";
// import "google/protobuf/wrappers.proto";

message Messages {
  repeated Message messages = 1;
  optional int64 allCount = 2;
  optional int32 limit = 3;
  optional int32 offset = 4;
  optional string order = 5;
}

message Message {
  optional string workspace = 1 [(gogoproto.nullable) = false, (gogoproto.moretags) = "db:\"-\""];
  optional string endpoint = 2 [(gogoproto.nullable) = false];
  optional string authorization = 3 [(gogoproto.nullable) = false];
  repeated string userIds = 4;
  optional string roomId = 11 [(gogoproto.nullable) = false];
  optional string userId = 12 [(gogoproto.nullable) = false];
  optional string type = 13 [(gogoproto.nullable) = false];
  optional string eventName = 14 [(gogoproto.nullable) = false];
  optional MessagePayload payload = 15;
  optional int32 role = 16 [(gogoproto.nullable) = false];
  optional string WebhookToken = 17 [(gogoproto.nullable) = false];
  optional int64 created = 30 [(gogoproto.nullable) = false];
  optional int64 modified = 31 [(gogoproto.nullable) = false];
}

message MessagePayload {
  // text
  optional string text = 1 [(gogoproto.nullable) = false];

  // image
  optional string mime = 11 [(gogoproto.nullable) = false];
  optional string filename = 12 [(gogoproto.nullable) = false];
  optional string sourceUrl = 13 [(gogoproto.nullable) = false];
  optional string thumbnailUrl = 14 [(gogoproto.nullable) = false];
  optional int32 width = 15 [(gogoproto.nullable) = false];
  optional int32 height = 16 [(gogoproto.nullable) = false];
}
